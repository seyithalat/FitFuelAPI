generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = "mysql://root:1453Istan.@localhost:3307/fitfuel"
}

model exercises {
  exercise_id    Int     @id @default(autoincrement())
  name           String  @db.VarChar(255)
  primary_muscle String? @db.VarChar(100)
}

model foods {
  food_id   Int         @id @default(autoincrement())
  name      String      @db.VarChar(255)
  kcal      Int
  carbs     Float
  protein   Float
  fat       Float
  mealitems mealitems[]

  @@index([name], map: "Foods_name_idx")
}

model mealitems {
  meal_item_id Int   @id @default(autoincrement())
  meal_id      Int
  food_id      Int
  quantity     Int?
  foods        foods @relation(fields: [food_id], references: [food_id], onUpdate: NoAction, map: "MealItems_food_id_fkey")
  meals        meals @relation(fields: [meal_id], references: [meal_id], onDelete: Cascade, onUpdate: NoAction, map: "MealItems_meal_id_fkey")

  @@index([food_id], map: "MealItems_food_id_idx")
  @@index([meal_id], map: "MealItems_meal_id_idx")
}

model meals {
  meal_id   Int         @id @default(autoincrement())
  user_id   Int
  date      DateTime?   @db.DateTime(0)
  mealitems mealitems[]
  users     users       @relation(fields: [user_id], references: [user_id], onDelete: Cascade, onUpdate: NoAction, map: "Meals_user_id_fkey")

  @@index([user_id], map: "Meals_user_id_fkey")
}

model users {
  user_id    Int        @id @default(autoincrement())
  email      String     @unique(map: "email") @db.VarChar(255)
  password   String?    @db.VarChar(255)
  created_at DateTime   @default(now()) @db.DateTime(0)
  meals      meals[]
  workouts   workouts[]
}

model workouts {
  workout_id Int       @id @default(autoincrement())
  user_id    Int
  date       DateTime? @db.DateTime(0)
  exercise   String    @db.VarChar(255)
  reps       Int?
  sets       Int?
  weight     Float?
  users      users     @relation(fields: [user_id], references: [user_id], onDelete: Cascade, onUpdate: NoAction, map: "Workouts_user_id_fkey")

  @@index([user_id], map: "Workouts_user_id_fkey")
}
